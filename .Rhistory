library(DiagrammeR)
install.packages("DiagrammeR")
# install.packages("DiagrammeR")
library(DiagrammeR)
grViz("
digraph workflow_dag {
rankdir=TB
graph [fontsize=12, labelloc=t, label='Reproducible Analysis Workflow (Teaching DAG)']
node  [shape=box, style='rounded', fontsize=11]
edge  [fontsize=10]
world   [label='World']
trans   [label='Domain translation\\n(sensor / observer)']
raw     [label='RAW data\\n(immutable)']
integ   [label='Integrity checks\\n(hashes, validation)', shape=note, style='filled', fillcolor='#f3f3f3']
process [label='Processing / structuring\\n(clean, transcribe, harmonize)']
derived [label='Derived data\\n(features, measurements)']
results [label='Computational results\\n(fits, summaries, predictions)']
infer   [label='Inference\\n(assumptions, tests, reasoning)']
pres    [label='Presentation\\n(figures, tables)']
interp  [label='Interpretation\\n(narrative, claims)']
archive [label='Archival / dissemination\\n(package + DOI)', shape=folder]
world -> trans -> raw -> process -> derived -> results -> infer -> pres -> interp
raw -> integ
pres -> archive
raw -> archive
}
")
# workflow_dag_diagrammer.R
# Reproducible Analysis Workflow DAG (Artifacts vs Processes)
#
# Install if needed:
# install.packages("DiagrammeR")
library(DiagrammeR)
grViz("
digraph reproducible_workflow {
rankdir=TB
graph [
fontsize=12,
labelloc=t,
label='Reproducible Analysis Workflow DAG\\n(Artifacts vs Processes)'
]
# ---- Node styles ----
node [fontname=Helvetica, fontsize=11]
edge [fontname=Helvetica, fontsize=10, arrowsize=0.7]
# ---- Artifact nodes ----
node [shape=box, style='rounded', penwidth=1.2]
WORLD      [label='World\\n(phenomena)']
RAW        [label='Raw data\\n(immutable facts)']
CAPMETA    [label='Capture metadata\\n(context, instruments, observers)']
INTEGREP   [label='Integrity report\\n(hashes, validation logs)']
INGESTED   [label='Ingested raw package\\n(indexed + verified)']
PROCDATA   [label='Processed data\\n(clean/structured)']
DERDATA    [label='Derived data\\n(features, measurements)']
AI_OUT     [label='AI outputs\\n(labels, annotations)']
CONS_OUT   [label='Consensus labels\\n(review/aggregation)']
SIM_OUT    [label='Simulated data\\n(model-generated)']
COMP_RES   [label='Computational results\\n(fits, predictions, summaries)']
INFER_OUT  [label='Inferential outputs\\n(decisions, tests, posterior summaries)']
FIGTAB     [label='Figures / Tables']
NARR       [label='Interpretation / Narrative\\n(human, non-reproducible)']
ARCHIVE    [label='Archival package\\n(data + code + env + metadata)', shape=folder]
# ---- Process nodes ----
node [shape=ellipse, style='filled', fillcolor='#f2f2f2', penwidth=1.0]
TRANS      [label='Domain translation\\n(sensor/observer)']
INTEGCHK   [label='Integrity checks\\n(read-only)']
INGEST     [label='Ingest / organize']
PROCESS    [label='Processing / structuring']
FEATURES   [label='Feature extraction']
AI_ANN     [label='AI annotation\\n(inference, not raw)']
CONSENSUS  [label='Review / aggregation']
SIM_ENGINE [label='Simulation engine']
MODEL      [label='Model fitting\\n(computation)']
INFERENCE  [label='Inference rules\\n(assumptions applied)']
PRESENT    [label='Presentation build\\n(render figures/tables)']
PACKAGE    [label='Package & publish']
# ---- Core flow ----
WORLD -> TRANS -> RAW
# Capture metadata produced alongside capture
TRANS -> CAPMETA
# Integrity checks observe raw + capture metadata
RAW -> INTEGCHK
CAPMETA -> INTEGCHK
INTEGCHK -> INTEGREP
# Ingested raw package (still raw) depends on raw + integrity report + capture metadata
RAW -> INGEST
INTEGREP -> INGEST
CAPMETA -> INGEST
INGEST -> INGESTED
# Processing and derived data
INGESTED -> PROCESS
CAPMETA  -> PROCESS
PROCESS  -> PROCDATA
PROCDATA -> FEATURES -> DERDATA
# Branches: AI, citizen science consensus, simulation
DERDATA  -> AI_ANN -> AI_OUT
RAW      -> CONSENSUS -> CONS_OUT
DERDATA  -> SIM_ENGINE -> SIM_OUT
# Computational results: models can use derived + optional AI/consensus/sims
DERDATA  -> MODEL
AI_OUT   -> MODEL
CONS_OUT -> MODEL
SIM_OUT  -> MODEL
MODEL    -> COMP_RES
# Inference operates on computational results
COMP_RES -> INFERENCE -> INFER_OUT
# Presentation operates on inferential outputs and/or computational results
INFER_OUT -> PRESENT
COMP_RES  -> PRESENT
PRESENT   -> FIGTAB
# Interpretation is downstream of presentation only
FIGTAB -> NARR
# Archival package includes key artifacts
RAW      -> PACKAGE
CAPMETA  -> PACKAGE
INTEGREP -> PACKAGE
PROCDATA -> PACKAGE
DERDATA  -> PACKAGE
COMP_RES -> PACKAGE
FIGTAB   -> PACKAGE
PACKAGE  -> ARCHIVE
# ---- Visual cue: emphasize raw data node ----
RAW [penwidth=2.5]
}
")
2016-1828
3+38/60
a <- 3+38/60
a*80
source("class_r_scripts/load_packages.r")
d <- read.csv("class_data/lepusantilocapra_pelonates_experiment.csv")
library(dplyr)
#| label: setup
#| include: false
knitr::opts_chunk$set(error = FALSE, warning = FALSE, message = FALSE)
source("class_r_scripts/load_packages.r")
vif_results <- car::vif(climate)
climate |>
ggpairs(
upper = list(continuous = "cor"),
lower = list(continuous = "smooth"),
diag  = list(continuous = "barDiag")
)
climate |>
ggpairs(
upper = list(continuous = "cor"),
lower = list(continuous = "smooth"),
diag  = list(continuous = "barDiag")
)
climate <- import("class_data/lepusantilocapra_climate_data.csv")
str(climate)
climate |>
ggpairs(
upper = list(continuous = "cor"),
lower = list(continuous = "smooth"),
diag  = list(continuous = "barDiag")
)
vif_results <- car::vif(climate)
vif_results <- cars::vif(climate)
vif_results <- vif(climate)
vif_results <- usdm::vif(climate)
vif_results
install.packages(ggbeeswarm)
install.packages("ggbeeswarm")
install.packages("gghalves")
install.packages("gghalves")
library(gghalves)
ggplot(d, aes(x = number_lorax,
y = oxygen_ppm,
fill = salt_treatment)) +
geom_tdp() +
labs(title = "Oxygen ppm by # lorax and salt treatment",
x = "number of lorax",
y = "Oxygen ppm") +
theme_minimal()
geom_tdp <- function(min_n_density = 20,
show_density = TRUE,
point_alpha = 0.5,
point_size = 1.7,
point_width = 0.25,
density_nudge = -0.22,
interval_nudge = 0.22,
...) {
# Safety checks
for (pkg in c("dplyr", "ggplot2")) {
if (!requireNamespace(pkg, quietly = TRUE)) {
stop(sprintf("Package '%s' is required.", pkg), call. = FALSE)
}
}
layers <- list()
# ---- optional half-density (left side) ----
if (show_density && requireNamespace("gghalves", quietly = TRUE)) {
layers <- c(
layers,
list(
gghalves::geom_half_violin(
side = "l",
trim = FALSE,
fill = NA,
linewidth = 0.6,
position = ggplot2::position_nudge(x = density_nudge),
...
)
)
)
}
# ---- raw data points (primary data ink) ----
if (requireNamespace("ggbeeswarm", quietly = TRUE)) {
layers <- c(
layers,
list(
ggbeeswarm::geom_quasirandom(
alpha = point_alpha,
size = point_size,
width = point_width,
...
)
)
)
} else {
layers <- c(
layers,
list(
ggplot2::geom_jitter(
alpha = point_alpha,
size = point_size,
width = point_width,
height = 0,
...
)
)
)
}
# ---- robust intervals + median (right side) ----
layers <- c(
layers,
list(
ggplot2::stat_summary(
fun.min = ~ quantile(.x, 0.05, na.rm = TRUE),
fun.max = ~ quantile(.x, 0.95, na.rm = TRUE),
geom = "linerange",
linewidth = 0.7,
position = ggplot2::position_nudge(x = interval_nudge),
...
),
ggplot2::stat_summary(
fun.min = ~ quantile(.x, 0.25, na.rm = TRUE),
fun.max = ~ quantile(.x, 0.75, na.rm = TRUE),
geom = "linerange",
linewidth = 2.2,
position = ggplot2::position_nudge(x = interval_nudge),
...
),
ggplot2::stat_summary(
fun = median,
geom = "point",
size = 2.2,
position = ggplot2::position_nudge(x = interval_nudge),
...
)
)
)
layers
}
ggplot(d, aes(x = number_lorax,
y = oxygen_ppm,
fill = salt_treatment)) +
geom_tdp() +
labs(title = "Oxygen ppm by # lorax and salt treatment",
x = "number of lorax",
y = "Oxygen ppm") +
theme_minimal()
tibble::glimpse(d)
#| label: setup
#| include: false
knitr::opts_chunk$set(error = FALSE, warning = FALSE, message = FALSE)
source("class_r_scripts/load_packages.r")
setwd("~/GitHub_projects/ZOO5500/quant_course_sp2026")
#| label: setup
#| include: false
knitr::opts_chunk$set(error = FALSE, warning = FALSE, message = FALSE)
# Core packages
library(tidyverse) # meta-package (includes ggplot, stringr, forcats, dplyr, etc.)
library(lubridate) #parsing, manipulating, and computing with date–time data
library(rio) # Data I/O
library(mgcv) # generalized additive modeling and smooth term estimation
library(MASS) # base-recommended, but not tidyverse
library(Matrix) # some functions related to core statistical infrastructure
library(fields) # spatial statistics and geostatistical utilities
library(psych) # psychometric and multivariate descriptive analysis
library(MuMIn) # multi-model inference and model comparison
library(insight) # provides model introspection
library(ggeffects) # produces tidy outputs compatible with ggplot2
library(GGally)  # extends ggplot2 but is not tidyverse
d <- read.csv("class_data/lepusantilocapra_pelonates_experiment.csv")
d
glimpse(d)
ggplot(d, aes(x = number_jackalope, y = oxygen_ppm, fill = salt_treatment)) +
geom_boxplot() +
labs(title = "Oxygen ppm by # jackalope and salt treatment",
x = "number of jackalope",
y = "Oxygen ppm") +
theme_minimal()
summary(d)
ggplot(d, aes(x = oxygen_ppm, fill = salt_treatment)) +
geom_density(alpha = 0.5) +
labs(title = "density of oxygen ppm by salt treatment",
x = "oxygen ppm",
y = "density") +
theme_minimal()
ggplot(d, aes(x = oxygen_ppm, fill = number_jackalope)) +
geom_density(alpha = 0.5) +
labs(title = "density of oxygen ppm by # jackalope",
x = "oxygen ppm",
y = "density") +
theme_minimal()
d <- d |>
mutate(number_jackalope = factor(number_jackalope )) |>
mutate(salt_treatment = factor(salt_treatment))
ggplot(d, aes(x = oxygen_ppm, fill = salt_treatment)) +
geom_density(alpha = 0.5) +
labs(title = "density of oxygen ppm by salt treatment",
x = "oxygen ppm",
y = "density") +
theme_minimal()
ggplot(d, aes(x = oxygen_ppm, fill = number_jackalope)) +
geom_density(alpha = 0.5) +
labs(title = "density of oxygen ppm by # jackalope",
x = "oxygen ppm",
y = "density") +
theme_minimal()
d |>
group_by(number_jackalope, salt_treatment) |>
summarise(mean_oxygen = mean(oxygen_ppm), .groups = "drop") |>
ggplot(aes(x = number_jackalope, y = salt_treatment, fill = mean_oxygen)) +
geom_tile() +
scale_fill_gradient(low = "lightblue", high = "darkblue") +
labs(title = "heatmap: mean oxygen ppm by # jackalope and salt treatment",
x = "number of jackalope",
y = "salt treatment",
fill = "mean oxygen ppm") +
theme_minimal()
d |>
ggplot(aes(x = salt_treatment, y = oxygen_ppm, fill = salt_treatment)) +
geom_boxplot() +
labs(title = "Boxplot by salt treatment", x = "salt_treatment", y = "oxygen_ppm") +
theme_minimal()
#| message: false
#| warning: false
d |>
ggplot(aes(x = oxygen_ppm, y = salt_treatment)) +
geom_point(alpha = 0.6) +
labs(
title = "Cleveland dot plot by salt treatment",
x = "oxygen_ppm",
y = "salt_treatment"
) +
theme_minimal()
d |>
ggplot(aes(x = number_jackalope, y = oxygen_ppm, fill = number_jackalope)) +
geom_boxplot() +
labs(title = "Boxplot by number of jackalope", x = "number_jackalope", y = "oxygen_ppm") +
theme_minimal()
climate <- import("class_data/lepusantilocapra_climate_data.csv")
climate <- import("class_exercise_data/lepusantilocapra_climate_data.csv")
climate <- import("class_exercise_data/lepusantilocapra_climate_data.csv")
#| label: setup
#| include: false
knitr::opts_chunk$set(error = FALSE, warning = FALSE, message = FALSE)
# Core packages
library(tidyverse) # meta-package (includes ggplot, stringr, forcats, dplyr, etc.)
library(lubridate) #parsing, manipulating, and computing with date–time data
library(rio) # Data I/O
library(mgcv) # generalized additive modeling and smooth term estimation
library(MASS) # base-recommended, but not tidyverse
library(Matrix) # some functions related to core statistical infrastructure
library(fields) # spatial statistics and geostatistical utilities
library(psych) # psychometric and multivariate descriptive analysis
library(MuMIn) # multi-model inference and model comparison
library(insight) # provides model introspection
library(ggeffects) # produces tidy outputs compatible with ggplot2
library(GGally)  # extends ggplot2 but is not tidyverse
#| eval: false
source("class_r_scripts/load_packages.r")
#| eval: false
source("class_r_scripts/load_packages.r")
#| label: setup
#| include: false
knitr::opts_chunk$set(error = FALSE, warning = FALSE, message = FALSE)
# Core packages
library(tidyverse) # meta-package (includes ggplot, stringr, forcats, dplyr, etc.)
library(lubridate) #parsing, manipulating, and computing with date–time data
library(rio) # Data I/O
library(mgcv) # generalized additive modeling and smooth term estimation
library(MASS) # base-recommended, but not tidyverse
library(Matrix) # some functions related to core statistical infrastructure
library(fields) # spatial statistics and geostatistical utilities
library(psych) # psychometric and multivariate descriptive analysis
library(MuMIn) # multi-model inference and model comparison
library(insight) # provides model introspection
library(ggeffects) # produces tidy outputs compatible with ggplot2
library(GGally)  # extends ggplot2 but is not tidyverse
#| eval: false
source("class_r_scripts/load_packages.r")
getwd()
#| eval: false
source("exercises_class_r_scripts/load_packages.r")
#| eval: false
source("exercises/class_r_scripts/load_packages.r")
d <- read.csv("class_data/lepusantilocapra_pelonates_experiment.csv")
d <- read.csv("class_exercise_data/lepusantilocapra_pelonates_experiment.csv")
d <- read.csv("class_exercise_data/lepusantilocapra_pelonates_experiment.csv")
setwd("~/GitHub_projects/ZOO5500/quant_course_sp2026/chapters")
#| eval: false
source("class_r_scripts/load_packages.r")
d <- read.csv("class_exercise_data/lepusantilocapra_pelonates_experiment.csv")
d <- d |>
mutate(number_jackalope = factor(number_jackalope )) |>
mutate(salt_treatment = factor(salt_treatment))
summary(d)
ggplot(d, aes(x = number_jackalope, y = oxygen_ppm, fill = salt_treatment)) +
geom_boxplot() +
labs(title = "Oxygen ppm by # jackalope and salt treatment",
x = "number of jackalope",
y = "Oxygen ppm") +
theme_minimal()
ggplot(d, aes(x = number_jackalope, y = oxygen_ppm)) +
geom_boxplot() +
facet_wrap(~salt_treatment) +
labs(title = "Oxygen ppm by number of jackalopes across salt treatments",
x = "# jackalope",
y = "oxygen ppm") +
theme_minimal()
ggplot(d, aes(x = number_jackalope, y = oxygen_ppm, color = salt_treatment, shape = salt_treatment)) +
geom_jitter(width = 0.1, height = 0) +
labs(title = "oxygen ppm scatter plot by # jackalope and salt treatment",
x = "# jackalope",
y = "oxygen ppm") +
theme_minimal()
ggplot(d, aes(x = oxygen_ppm, fill = salt_treatment)) +
geom_density(alpha = 0.5) +
labs(title = "density of oxygen ppm by salt treatment",
x = "oxygen ppm",
y = "density") +
theme_minimal()
ggplot(d, aes(x = oxygen_ppm, fill = number_jackalope)) +
geom_density(alpha = 0.5) +
labs(title = "density of oxygen ppm by # jackalope",
x = "oxygen ppm",
y = "density") +
theme_minimal()
d |>
group_by(number_jackalope, salt_treatment) |>
summarise(mean_oxygen = mean(oxygen_ppm), .groups = "drop") |>
ggplot(aes(x = number_jackalope, y = salt_treatment, fill = mean_oxygen)) +
geom_tile() +
scale_fill_gradient(low = "lightblue", high = "darkblue") +
labs(title = "heatmap: mean oxygen ppm by # jackalope and salt treatment",
x = "number of jackalope",
y = "salt treatment",
fill = "mean oxygen ppm") +
theme_minimal()
d |>
ggplot(aes(x = salt_treatment, y = oxygen_ppm, fill = salt_treatment)) +
geom_boxplot() +
labs(title = "Boxplot by salt treatment", x = "salt_treatment", y = "oxygen_ppm") +
theme_minimal()
climate <- import("class_exercise_data/lepusantilocapra_climate_data.csv")
str(climate)
climate |>
ggpairs(
upper = list(continuous = "cor"),
lower = list(continuous = "smooth"),
diag  = list(continuous = "barDiag")
)
# "upper" = Show Pearson correlation coefficients in the upper panel
# "lower" = Optionally show scatterplots with smoothing in the lower panel
# "diag"  = Optionally show histograms on the diagonal
vif_results <- usdm::vif(climate)
vif_results
vif_results
d <- read.csv("class_exercise_data/lepusantilocapra_pelonates_experiment.csv")
setwd("~/GitHub_projects/ZOO5500/quant_course_sp2026")
#| eval: false
source("class_r_scripts/load_packages.r")
setwd("~/GitHub_projects/ZOO5500/quant_course_sp2026/chapters")
#| eval: false
source("class_r_scripts/load_packages.r")
d <- read.csv("class_exercise_data/lepusantilocapra_pelonates_experiment.csv")
d <- d |>
mutate(number_jackalope = factor(number_jackalope )) |>
mutate(salt_treatment = factor(salt_treatment))
summary(d)
#| eval: false
data |>
ggplot(
aes(x = <x_variable>, y = <y_variable>, <optional_aesthetic> = <variable>)
ggplot(d, aes(x = number_jackalope, y = oxygen_ppm, fill = salt_treatment)) +
geom_boxplot() +
labs(title = "Oxygen ppm by # jackalope and salt treatment",
x = "number of jackalope",
y = "Oxygen ppm") +
theme_minimal()
ggplot(d, aes(x = number_jackalope, y = oxygen_ppm, fill = salt_treatment)) +
geom_violin(trim = FALSE) +
labs(title = "distribution of oxygen ppm by # jackalope and salt treatment",
x = "number of jackalopes",
y = "oxygen ppm") +
theme_minimal()
?geom_violin
?theme_minimal
setwd("~/GitHub_projects/ZOO5500/quant_course_sp2026/chapters")
setwd("~/GitHub_projects/ZOO5500/quant_course_sp2026")
